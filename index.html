<!doctype html>

<html lang="pl" ng-app="walletApp">
<head>
    <meta charset="utf-8">
    <title>wallet</title>
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="stylesheet" href="css/style.css">

    <!-- vendor -->
    <link rel="stylesheet" href="vendor/fontawesome/css/font-awesome.min.css">

    <script src="vendor/angular/angular.min.js"></script>
    <script src="vendor/ngstorage/ngStorage.min.js"></script>
    <script src="vendor/angular-translate/angular-translate.js"></script>
    <script src="vendor/angular-translate-loader-static-files/angular-translate-loader-static-files.js"></script>

    <script src="vendor/lodash/lodash.js"></script>

    <!-- app -->
    <script src="scripts/walletApp.js"></script>
    
    <!-- controllers -->
    <script src="scripts/controllers/walletController.js"></script>
    <script src="scripts/controllers/mainController.js"></script>

    <!-- filters -->
    <script src="scripts/filters/btc.js"></script>

    <!-- services -->
    <script src="scripts/services/bitcoinDataService.js"></script>

</head>

<body ng-controller="MainController">


<span class="i18n">
    <button ng-click="setTranslation('pl')">pl</button>
    <button ng-click="setTranslation('en')">en</button>
    {{ 'LANGUAGE' | translate }}
</span>

<h3>{{ 'WALLET.TITLE' | translate }}</h3>

<div ng-controller="WalletController">
    <input type="button" ng-click="checkBalances()" value="&#8634;" />

    <div class="wallet-header">
        <span class="address">
            {{ 'WALLET.TABLE_HEADER.ADDRESS' | translate }}
        </span>

        <span class="received">
            <span>
                {{ 'WALLET.TABLE_HEADER.RECEIVED' | translate }} <i class="fa fa-btc"></i>
            </span>
            <span class="sum">
                {{ sumBalances('received') * 1e-8 | btc }}
            </span>
        </span>

        <span class="balance">
            <span>
                {{ 'WALLET.TABLE_HEADER.BALANCE' | translate }} <i class="fa fa-btc"></i>
            </span>
            <span class="sum">
                {{ sumBalances() * 1e-8 | btc }}
            </span>
        </span>
    </div>
    <ul class="wallet-list">
        <li ng-repeat=" row in $storage.wallet " ng-class="{ blink: row.blink }">
            <span class="address">
                {{ row.address }}
            </span>

            <span
                class="received"
                ng-class="{ soft: row.received === 0 }"
            >
                {{ row.received * 1e-8 | btc }}
            </span>

            <span
                class="balance"
                ng-class="{ soft: row.balance === 0 }"
            >
                {{ row.balance * 1e-8 | btc }}
            </span>

            <span class="trash" ng-click="deleteRow(row)" title="{{ 'WALLET.TABLE_ENTRIES.DELETE' | translate }}">
                <i class="fa fa-trash-o"></i>
            </span>
        </li>
    </ul>

    <br/>

    <input type="text" ng-model="address" placeholder="{{ 'WALLET.ADD.PLACEHOLDER' | translate }}" />
    <input type="button" ng-click="addAddress()" value="+" />
</div>

</body>
</html>